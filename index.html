<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SecureChat - Simple Messaging</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js"></script>
    <script src="https://cdn.socket.io/4.6.0/socket.io.min.js"></script>
</head>
<body data-theme="light">
    <div class="app-container">
        
        <!-- Username Screen -->
        <div class="screen active" id="usernameScreen">
            <div class="welcome-card">
                <div class="logo">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"/>
                    </svg>
                </div>
                <h1>Welcome to SecureChat</h1>
                <p>Enter your name to start chatting</p>
                
                <div class="input-group">
                    <input type="text" id="usernameInput" placeholder="Your Name" maxlength="20" autocomplete="off">
                </div>
                
                <button class="btn-primary" id="continueBtn">
                    Continue
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"/>
                    </svg>
                </button>
                
                <div class="theme-switch">
                    <button class="theme-btn" id="themeToggle">
                        <svg class="icon-sun" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1z"/>
                        </svg>
                        <svg class="icon-moon" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M9 2c-1.05 0-2.05.16-3 .46 4.06 1.27 7 5.06 7 9.54 0 4.48-2.94 8.27-7 9.54.95.3 1.95.46 3 .46 5.52 0 10-4.48 10-10S14.52 2 9 2z"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Room Selection Screen -->
        <div class="screen" id="roomScreen">
            <div class="room-card">
                <button class="back-btn" id="backToUsername">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                    </svg>
                </button>
                
                <h2>Start Chatting</h2>
                <p class="subtitle">Create or join a room</p>
                
                <div class="tabs">
                    <button class="tab active" data-tab="create">Create</button>
                    <button class="tab" data-tab="join">Join</button>
                </div>
                
                <!-- Create Room Tab -->
                <div class="tab-content active" id="createTab">
                    <div class="room-code-display">
                        <label>Room Code</label>
                        <div class="code-box">
                            <span id="roomCode">------</span>
                            <button class="icon-btn copy-btn" id="copyCodeBtn" title="Copy">
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                    
                    <div class="qr-container">
                        <div id="qrcode"></div>
                    </div>
                    
                    <button class="btn-primary" id="createRoomBtn">
                        Generate Code
                    </button>
                    
                    <div class="waiting-status" id="waitingStatus" style="display: none;">
                        <div class="spinner"></div>
                        <span>Waiting for connection...</span>
                    </div>
                </div>
                
                <!-- Join Room Tab -->
                <div class="tab-content" id="joinTab">
                    <div class="input-group">
                        <label>Enter Room Code</label>
                        <input type="text" id="roomCodeInput" placeholder="6-digit code" maxlength="6" autocomplete="off">
                    </div>
                    
                    <button class="btn-primary" id="joinRoomBtn">
                        Join Chat
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"/>
                        </svg>
                    </button>
                    
                    <div class="divider">
                        <span>OR</span>
                    </div>
                    
                    <button class="btn-secondary" id="scanQrBtn">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M9.5 6.5v3h-3v-3h3M11 5H5v6h6V5zm-1.5 9.5v3h-3v-3h3M11 13H5v6h6v-6zm6.5-6.5v3h-3v-3h3M19 5h-6v6h6V5z"/>
                        </svg>
                        Scan QR Code
                    </button>
                    
                    <div id="qrScanner" style="display: none;">
                        <div id="qrReader"></div>
                        <button class="btn-secondary" id="stopScanBtn" style="margin-top: 12px;">Stop Scanning</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Chat Screen -->
        <div class="screen" id="chatScreen">
            <div class="chat-container">
                <div class="chat-header">
                    <div class="header-left">
                        <div class="avatar" id="contactAvatar">
                            <span id="contactInitial">?</span>
                        </div>
                        <div class="header-info">
                            <h3 id="contactName">Connecting...</h3>
                            <span class="status" id="status">
                                <span class="status-dot"></span>
                                <span id="statusText">Connecting</span>
                            </span>
                        </div>
                    </div>
                    <div class="header-actions">
                        <span class="room-badge" id="roomCodeBadge">------</span>
                        <button class="icon-btn" id="themeToggleChat">
                            <svg class="icon-sun" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5z"/>
                            </svg>
                            <svg class="icon-moon" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M9 2c-1.05 0-2.05.16-3 .46 4.06 1.27 7 5.06 7 9.54 0 4.48-2.94 8.27-7 9.54.95.3 1.95.46 3 .46 5.52 0 10-4.48 10-10S14.52 2 9 2z"/>
                            </svg>
                        </button>
                        <button class="icon-btn" id="disconnectBtn" title="Leave">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <div class="chat-messages" id="chatMessages">
                    <div class="date-divider">
                        <span id="chatDate">Today</span>
                    </div>
                </div>

                <div class="chat-input-container">
                    <div class="emoji-picker" id="emojiPicker" style="display: none;">
                        <div class="emoji-grid">
                            😀 😃 😄 😁 😆 😅 😂 🤣 😊 😇 🙂 🙃 😉 😌 😍 🥰 😘 😗 😙 😚 😋 😛 😝 😜 🤪 🤨 🧐 🤓 😎 🤩 🥳 😏 😒 😞 😔 😟 😕 🙁 😣 😖 😫 😩 🥺 😢 😭 😤 😠 😡 🤬 🤯 😳 🥵 🥶 😱 😨 😰 😥 😓 🤗 🤔 🤭 🤫 🤥 😶 😐 😑 😬 🙄 😯 😦 😧 😮 😲 🥱 😴 🤤 😪 😵 🤐 🥴 🤢 🤮 🤧 😷 🤒 🤕 🤑 🤠 👍 👎 👏 🙌 🤝 🙏 💪 ❤️ 🧡 💛 💚 💙 💜 🖤 🤍 🤎 💔 ❣️ 💕 💞 💓 💗 💖 💝 💟 🔥 ✨ 💫 ⭐ 🌟 ✅ ❌ ⚠️ 🎉 🎊 🎁 🎈 🎀 🎂 🍕 🍔 🍟 🌭 🥤 ☕ 🍺 🍻 🥂 🍷 🍾 🎮 🎯 🎲 🎸 🎵 🎶 🎤 🎧 📱 💻 ⌨️ 🖱️ 🖥️
                        </div>
                    </div>
                    <div class="chat-input">
                        <button class="icon-btn emoji-btn" id="emojiBtn">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"/>
                            </svg>
                        </button>
                        <div class="input-wrapper">
                            <input type="text" id="messageInput" placeholder="Type a message..." autocomplete="off">
                        </div>
                        <button class="send-btn" id="sendBtn">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                            </svg>
                        </button>
                    </div>
                    <div class="typing-indicator" id="typingIndicator" style="display: none;">
                        <span id="typingName">Someone</span> is typing
                        <span class="typing-dots">
                            <span></span><span></span><span></span>
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
